import React, { useState, useEffect } from 'react'
import axios from 'axios'

const App = () => {
	
	const [ countries, setCountries ] = useState([])
	const [ criteria, setCriteria ] = useState([])
	
	
	useEffect(() => {
		console.log('effect')
		axios.get('https://restcountries.eu/rest/v2/all')
		.then(response => {			
			console.log('promise fulfilled')
			setCountries(response.data)
		})
	}, [])
	console.log('render', countries.length, 'countries')
	
	
	const filterCountry = (event) => {
		setCriteria(event.target.value)
		const matches = countries.name.filter(c => c.includes(criteria))
		return (
			if (matches.length > 10) {
				'Too many matches,specify another filter'
			} else if (mathes.lenght > 1 && matches.length < 11) {
				<ul>
				{matches.map(match =>
					<li>
					<h1>{match.name}</h1>
					capital {match.capital}
					population {match.population}
					</li>}
				</ul>
			}
		)
	}
	
	
	return (
	<div>
		<form }>
			<input>
				value={criteria}
				onChange={filterCountry}
			</input>
		</form>
	</div>
	)
}

export default App
